<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>claudecode.link</title>
  <meta name="description" content="Share Claude Code sessions with others. Easy collaboration, debugging, and documentation for Claude Code CLI conversations.">
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <div class="container">
    <h1>claudecode.link</h1>

    <div class="info-box">
      <h2>What is this?</h2>
      <p>
        This site allows you to share Claude Code sessions with others. Claude Code is Anthropic's
        official CLI tool for Claude, and this service makes it easy to share conversation traces
        for collaboration, debugging, or documentation purposes.
      </p>

      <h2>How it works</h2>
      <ul>
        <li>Paste your Claude Code session output below</li>
        <li>Click "Create Share Link" to upload it</li>
        <li>Get a unique shareable link</li>
        <li>Share the link with anyone - no login required</li>
      </ul>

      <h2>Privacy</h2>
      <p>
        Sessions are stored anonymously. Anyone with the link can view the session.
        Do not share sensitive information like API keys, passwords, or private data.
      </p>
    </div>

    <h2>Paste your session</h2>
    <textarea id="content" placeholder="Paste your Claude Code session output here..."></textarea>

    <button id="submit">Create Share Link</button>

    <div id="message"></div>

    <footer style="margin-top: 40px; padding-top: 20px; border-top: 2px solid var(--border); text-align: center; font-size: 12px;">
      built by <a href="https://taloranderson.com">talor</a>
    </footer>
  </div>

  <script>
    const textarea = document.getElementById('content');
    const button = document.getElementById('submit');
    const message = document.getElementById('message');

    button.addEventListener('click', async () => {
      // trim leading newlines but NOT leading whitespace!
      const content = textarea.value.replace(/^\n+/, '')

      if (!content) {
        message.innerHTML = '<div class="error">Please paste some content first.</div>';
        return;
      }

      button.disabled = true;
      button.textContent = 'Creating...';
      message.innerHTML = '';

      try {
        const response = await fetch('/api/sessions', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ content })
        });

        const data = await response.json();

        if (!response.ok) {
          throw new Error(data.error || 'Failed to create session');
        }

        const url = `/s/${data.id}`;
        window.location.href = url;
      } catch (error) {
        message.innerHTML = `<div class="error">Error: ${error.message}</div>`;
      } finally {
        button.disabled = false;
        button.textContent = 'Create Share Link';
      }
    });
  </script>
</body>
</html>
